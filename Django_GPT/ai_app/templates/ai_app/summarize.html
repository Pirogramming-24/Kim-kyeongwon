{% extends 'ai_app/base.html' %}

{% block title %}ìš”ì•½ - AI ì›¹ ì„œë¹„ìŠ¤{% endblock %}

{% block content %}
<h2 style="color: #2c3e50; margin-bottom: 20px;">ğŸ“ í…ìŠ¤íŠ¸ ìš”ì•½</h2>
<p style="color: #7f8c8d; margin-bottom: 30px;">ê¸´ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ë©´ AIê°€ ì§§ê²Œ ìš”ì•½í•´ë“œë¦½ë‹ˆë‹¤. (ë¡œê·¸ì¸ ì—†ì´ ì‚¬ìš© ê°€ëŠ¥)</p>

<form method="post">
    {% csrf_token %}
    <div class="form-group">
        <label for="input_text">ìš”ì•½í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:</label>
        <textarea 
            name="input_text" 
            id="input_text" 
            rows="8" 
            placeholder="ì—¬ê¸°ì— ìš”ì•½í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
            required
        ></textarea>
    </div>
    <button type="submit">ìš”ì•½í•˜ê¸°</button>
    <div class="loading">ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤...</div>
</form>

{% if error %}
<div class="error">
    <strong>ì˜¤ë¥˜:</strong> {{ error }}
</div>
{% endif %}

{% if result %}
<div class="result">
    <h3>ìš”ì•½ ê²°ê³¼:</h3>
    <p>{{ result }}</p>
</div>
{% endif %}

{% if history %}
<div class="history">
    <h3>ìµœê·¼ ìš”ì•½ ë‚´ì—­ (ìµœëŒ€ 5ê°œ)</h3>
    {% for item in history %}
    <div class="history-item">
        {% if user.is_authenticated %}
        <p><strong>ì…ë ¥:</strong> {{ item.input_text }}</p>
        <p><strong>ê²°ê³¼:</strong> {{ item.output_text }}</p>
        <p style="color: #95a5a6; font-size: 12px;">{{ item.created_at|date:"Y-m-d H:i" }}</p>
        {% else %}
        <p><strong>ì…ë ¥:</strong> {{ item.input }}</p>
        <p><strong>ê²°ê³¼:</strong> {{ item.output }}</p>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endif %}

{% if not user.is_authenticated %}
<div style="margin-top: 30px; padding: 15px; background: #fff3cd; border-radius: 5px; border-left: 4px solid #ffc107;">
    <p style="color: #856404;">
        ğŸ’¡ <a href="{% url 'login' %}" style="color: #007bff;">ë¡œê·¸ì¸</a>í•˜ì‹œë©´ ìš”ì•½ ë‚´ì—­ì´ ì €ì¥ë©ë‹ˆë‹¤!
    </p>
</div>
{% endif %}
{% endblock %}